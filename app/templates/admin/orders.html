{% extends 'layout_admin.html' %} {% block title %}Objedn√°vky z√°kazn√≠k≈Ø{%
endblock %} {% block content %}
<h1>Objedn√°vky z√°kazn√≠k≈Ø</h1>

<!-- DataTables CSS -->
<link
  rel="stylesheet"
  href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
/>

<table id="orders-table" class="display">
  <thead>
    <tr>
      <th>ID</th>
      <th>ƒå√≠slo objedn√°vky</th>
      <th>Z√°kazn√≠k</th>
      <th>Email</th>
      <th>Adresa</th>
      <th>Produkt</th>
      <th>Mno≈æstv√≠</th>
      <th>Datum</th>
      <th>Faktura</th>
      <th>Stav</th>
    </tr>
    <tr>
      <!-- üîç Filtrovac√≠ pole v hlaviƒçce ka≈æd√©ho sloupce -->
      <th><input type="text" placeholder="Hledat ID" /></th>
      <th><input type="text" placeholder="Hledat objedn√°vku" /></th>
      <th><input type="text" placeholder="Hledat jm√©no" /></th>
      <th><input type="text" placeholder="Hledat email" /></th>
      <th><input type="text" placeholder="Hledat adresu" /></th>
      <th><input type="text" placeholder="Hledat produkt" /></th>
      <th><input type="text" placeholder="Mno≈æstv√≠" /></th>
      <th><input type="text" placeholder="Datum" /></th>
      <th><input type="text" placeholder="Faktura" /></th>
      <th><input type="text" placeholder="Stav" /></th>
    </tr>
  </thead>
  <tbody>
    {% for order in orders %}
    <tr>
      <td>{{ order.id }}</td>
      <td>ORD{{ "%03d"|format(order.id) }}</td>

      <td>{{ order.name }}</td>
      <td>{{ order.email }}</td>
      <td>{{ order.address }}</td>
      <td>{{ order.product.name }}</td>
      <td>{{ order.quantity }}</td>
      <td>{{ order.created_at.strftime('%Y-%m-%d') }}</td>
      <td>F{{ '%03d' % order.id }}</td>
      <td>{{ order.status if order.status else 'Nov√°' }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<!-- jQuery & DataTables JS -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
  $(document).ready(function () {
    // Inicializace tabulky
    var table = $("#orders-table").DataTable({
      orderCellsTop: true,
      fixedHeader: true,
    });

    // Pro ka≈æd√Ω input v hlaviƒçce vytvo≈ô√≠ filtr
    $("#orders-table thead tr:eq(1) th").each(function (i) {
      $("input", this).on("keyup change", function () {
        if (table.column(i).search() !== this.value) {
          table.column(i).search(this.value).draw();
        }
      });
    });
  });
</script>
{% endblock %}
