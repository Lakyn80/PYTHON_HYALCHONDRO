<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Hyalchondro{% endblock %}</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='client/css/layout.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='client/css/client-navbar.css') }}"
    />
    {% block extra_css %}{% endblock %}
  </head>
  <body class="{% if is_landing %}landing{% endif %}">
    {% if not is_landing %}
    <nav class="client-navbar">
      <div class="navbar-container">
        <div class="navbar-left"></div>

        <div class="navbar-right">
          <button class="navbar-toggle" id="navbarToggle">‚ò∞</button>
          <ul class="navbar-links" id="navbarLinks">
            <li><a href="{{ url_for('client.index') }}">Hyalchondro</a></li>
            <li><a href="{{ url_for('client.cart') }}">üõí –ö–æ—Ä–∑–∏–Ω–∞</a></li>
            <li>
              <a href="{{ url_for('client.checkout') }}">üí≥ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</a>
            </li>
            <li>
              <a
                class="nav-link"
                href="{{ url_for('client.product_detail', product_id=1) }}"
                >–¢–æ–≤–∞—Ä—ã</a
              >
            </li>

            {% if session.customer_logged_in %}
            <li><span>üë§ {{ session.customer_email }}</span></li>
            <li>
              <a href="{{ url_for('client.customer_orders') }}">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
            </li>
            <li><a href="{{ url_for('client.profile') }}">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a></li>
            <li>
              <a href="{{ url_for('client.logout_customer') }}">–í—ã–π—Ç–∏</a>
            </li>
            {% else %}
            <li>
              <a href="{{ url_for('client.login_customer') }}">–í–æ–π—Ç–∏</a>
            </li>
            <li>
              <a href="{{ url_for('client.register_customer') }}"
                >–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a
              >
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    {% endif %} {% if not is_landing %} {% with messages =
    get_flashed_messages(with_categories=true) %} {% if messages %} {% for
    category, message in messages %}
    <div class="alert alert-{{ category }} flash-message">{{ message }}</div>
    {% endfor %} {% endif %} {% endwith %} {% endif %} {% block content %}{%
    endblock %}

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toggle = document.getElementById("navbarToggle");
        const links = document.getElementById("navbarLinks");

        if (toggle && links) {
          // Ensure the navbar links are not toggled unintentionally on page load
          toggle.classList.remove("open");
          links.classList.remove("show");
        }

        toggle.addEventListener("click", function () {
          links.classList.toggle("show");
          toggle.classList.toggle("open");
        });

        // ‚úÖ Auto-hide flash messages after 2s
        setTimeout(() => {
          document.querySelectorAll(".flash-message").forEach((el) => {
            el.style.transition = "opacity 0.5s ease";
            el.style.opacity = "0";
            setTimeout(() => el.remove(), 500);
          });
        }, 2000);
      });
    </script>

    <script>
      window.addEventListener("load", () => {
        const table = document.querySelector(".table");
        const navbar = document.querySelector(".navbar");
        if (table && navbar) {
          const tableWidth = table.scrollWidth;
          navbar.style.minWidth = tableWidth + "px";
        }
      });
    </script>

    {% block content_scripts %}{% endblock %}
  </body>
</html>
