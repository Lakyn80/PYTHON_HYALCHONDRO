{% extends "layout_admin.html" %} {% block title %}Admin Dashboard{% endblock %}
{% block content %}
<div class="admin-container">
  <h2 class="mb-4">Produkty</h2>

  <a href="{{ url_for('admin.add_product') }}" class="btn btn-success mb-3"
    >+ Přidat nový produkt</a
  >

  {% if products %}
  <table
    class="table table-bordered table-hover table-striped align-middle bg-white shadow-sm"
  >
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Název</th>
        <th>Popis</th>
        <th>Cena</th>
        <th>Sklad</th>
        <th>Obrázek</th>
        <th>Akce</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
      <tr>
        <td>{{ product.id }}</td>
        <td>{{ product.name }}</td>
        <td>
          {{ product.description[:80] }}{% if product.description|length > 80
          %}...{% endif %}
        </td>
        <td>{{ product.price }} RUB</td>
        <td>{{ product.stock }} RUB</td>
        <td>
          {% if product.image_filename %}
          <img
            src="{{ url_for('static', filename='product-images/' ~ product.image_filename) }}"
            alt="{{ product.name }}"
            style="width: 60px; height: auto; border-radius: 4px"
          />
          {% else %} — {% endif %}
        </td>
        <td class="text-nowrap">
          <a
            href="{{ url_for('admin.edit_product', product_id=product.id) }}"
            class="btn btn-sm btn-primary"
            >Upravit</a
          >
          <form
            action="{{ url_for('admin.delete_product', product_id=product.id) }}"
            method="POST"
            style="display: inline-block"
          >
            <button
              type="submit"
              class="btn btn-sm btn-danger"
              onclick="return confirm('Opravdu smazat produkt?')"
            >
              Smazat
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info">Žádné produkty nebyly nalezeny.</div>
  {% endif %}
</div>
{% endblock %}
